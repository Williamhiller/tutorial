


<ion-view title="消息" hide-nav-bar="true">
    <ion-header-bar align-title="center" class="bar bar-positive">
        <div class="buttons">
            <button class="button borderless"
                    ng-if="messageList!=''"
                    ng-click="showDeleteFun()" ng-bind="data.showDeleteText">
            </button>
        </div>
        <h2 class="title">消息</h2>
        <div class="buttons">
            <button class="button borderless"
                    ng-if="messageList!=''"
                    ng-click="setAllRead()">
                一键标为已读
            </button>
        </div>
    </ion-header-bar>
    <ion-content>
        <ion-refresher pulling-text="下拉更新"
                       on-refresh="doRefresh()"></ion-refresher>
        <blank ng-if="messageList==''"></blank>
        <ion-list class="M_list" ng-show="messageList" show-delete="data.showDelete">
            <ion-item ng-class="{'unread': item.HAS_READ == '100000000002','item-remove-animate':data.showDelete}"
                      ui-sref="tab.message_detail({msg_id:item.MSG_ID})"
                      ng-repeat="item in messageList">
                <ion-delete-button class="icon-minus-circled" ng-click="deleteItem(item)"></ion-delete-button>
                <h2 class="l-height2">{{item.TITLE}}</h2>
                <p class="ellipsis2 t-indent2" ng-bind-html="item.CONTEXT"></p>
                <p align="right" class="f-14 c-666">{{item.CREATED_DATE}}</p>
                <!--<ion-option-button class="button-assertive" ng-click="deleteItem(item)">删除</ion-option-button>-->
            </ion-item>
        </ion-list>

        <ion-infinite-scroll ng-if="scope.hasMore"
                             on-infinite="doMore()"
                             distance="1%"></ion-infinite-scroll>
    </ion-content>
</ion-view>
